<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Reporte de Estad√≠sticas - Preguntados</title>
    <style>
        /* Estilos mejorados para PDF */
        body {
            font-family: 'DejaVu Sans', 'Helvetica', Arial, sans-serif;
            font-size: 12px;
            line-height: 1.4;
            color: #333;
            margin: 0;
            padding: 20px;
        }

        .header {
            text-align: center;
            border-bottom: 3px solid #2c3e50;
            padding-bottom: 15px;
            margin-bottom: 25px;
        }

        h1 {
            color: #2c3e50;
            font-size: 24px;
            margin: 0 0 5px 0;
        }

        h2 {
            color: #34495e;
            font-size: 18px;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 8px;
            margin-top: 25px;
        }

        h3 {
            color: #7f8c8d;
            font-size: 14px;
            margin: 0;
        }

        .subtitle {
            color: #7f8c8d;
            font-size: 14px;
            margin: 0;
        }

        .metrics-grid {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .metric-card {
            flex: 1;
            min-width: 30%;
            margin: 0 10px 15px 10px;
            padding: 15px;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .metric-value {
            font-size: 28px;
            font-weight: bold;
            color: #2c3e50;
            margin: 10px 0;
        }

        .metric-label {
            font-size: 12px;
            color: #7f8c8d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .chart-container {
            text-align: center;
            margin: 25px 0;
            page-break-inside: avoid;
        }

        .chart-container img {
            max-width: 90%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .chart-title {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .page-break {
            page-break-before: always;
            margin-top: 30px;
        }

        .section-break {
            margin-top: 40px;
        }

        .footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 10px;
            border-top: 1px solid #ecf0f1;
            color: #95a5a6;
            font-size: 10px;
        }

        .summary-section {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }

        .summary-text {
            font-size: 13px;
            color: #2c3e50;
            margin: 0;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 11px;
        }

        .data-table th {
            background: #34495e;
            color: white;
            padding: 8px;
            text-align: left;
        }

        .data-table td {
            padding: 8px;
            border-bottom: 1px solid #ecf0f1;
        }

        .data-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .timestamp {
            text-align: center;
            color: #7f8c8d;
            font-style: italic;
            margin: 10px 0;
        }

        .logo {
            text-align: center;
            margin-bottom: 10px;
        }

        .logo-text {
            font-size: 16px;
            font-weight: bold;
            color: #2c3e50;
        }

        .full-page-section {
            min-height: 600px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .chart-description {
            text-align: center;
            color: #7f8c8d;
            font-size: 12px;
            margin-top: 15px;
            max-width: 80%;
            margin-left: auto;
            margin-right: auto;
        }
    </style>
</head>
<body>

<!-- P√ÅGINA 1: ENCABEZADO Y M√âTRICAS PRINCIPALES -->
<div class="logo">
    <div class="logo-text">üéÆ Preguntados - Sistema de Juegos</div>
</div>

<div class="header">
    <h1>Reporte de Estad√≠sticas Generales</h1>
    <div class="subtitle">An√°lisis completo de la plataforma</div>
</div>

<div class="timestamp">
    Generado el: <strong>{{fechaGeneracion}}</strong>
</div>

<!-- Resumen Ejecutivo -->
<div class="summary-section">
    <p class="summary-text">
        üìä <strong>Resumen Ejecutivo:</strong> Este reporte presenta un an√°lisis completo de la plataforma Preguntados,
        incluyendo m√©tricas de usuarios, preguntas, partidas y distribuciones por categor√≠as y pa√≠ses.
    </p>
</div>

<!-- M√©tricas Principales -->
<h2>üìà M√©tricas Principales de la Plataforma</h2>

<div class="metrics-grid">
    <div class="metric-card">
        <div class="metric-label">Total de Usuarios</div>
        <div class="metric-value">{{totalUsuarios}}</div>
        <div style="color: #27ae60; font-size: 11px;">‚ñº Jugadores registrados</div>
    </div>

    <div class="metric-card">
        <div class="metric-label">Preguntas Activas</div>
        <div class="metric-value">{{totalPreguntas}}</div>
        <div style="color: #e74c3c; font-size: 11px;">‚ñº En base de datos</div>
    </div>

    <div class="metric-card">
        <div class="metric-label">Partidas Hoy</div>
        <div class="metric-value">{{partidasHoy}}</div>
        <div style="color: #3498db; font-size: 11px;">‚ñº Actividad del d√≠a</div>
    </div>
</div>

<!-- SALTO DE P√ÅGINA PARA DISTRIBUCI√ìN DE CATEGOR√çAS -->
<div class="page-break"></div>

<!-- P√ÅGINA 2: DISTRIBUCI√ìN DE PREGUNTAS POR CATEGOR√çA -->
<div class="full-page-section">
    <h2>üìö Distribuci√≥n de Preguntas por Categor√≠a</h2>
    <div class="chart-container">
        <div class="chart-title">Porcentaje de preguntas en cada categor√≠a</div>
        <img src="{{urlGraficoCategorias}}" alt="Distribuci√≥n de Preguntas por Categor√≠a">
        <div class="chart-description">
            Este gr√°fico muestra c√≥mo se distribuyen las preguntas activas entre las diferentes categor√≠as disponibles en la plataforma.
            Permite identificar las categor√≠as con mayor y menor cantidad de contenido.
        </div>
    </div>
</div>

<!-- SALTO DE P√ÅGINA PARA TOP PA√çSES -->
<div class="page-break"></div>

<!-- P√ÅGINA 3: TOP 10 PA√çSES -->
<div class="full-page-section">
    <h2>üåç Top 10 Pa√≠ses con M√°s Usuarios</h2>
    <div class="chart-container">
        <div class="chart-title">Distribuci√≥n geogr√°fica de usuarios registrados</div>
        <img src="{{urlGraficoPaises}}" alt="Top 10 Pa√≠ses con M√°s Usuarios">
        <div class="chart-description">
            Representaci√≥n de los 10 pa√≠ses con mayor n√∫mero de usuarios registrados en la plataforma.
            Muestra la diversidad geogr√°fica de nuestra base de usuarios.
        </div>
    </div>
</div>

<!-- SALTO DE P√ÅGINA PARA TENDENCIAS -->
<div class="page-break"></div>

<!-- P√ÅGINA 4: TENDENCIAS DE REGISTRO -->
<div class="full-page-section">
    <h2>üìÖ Tendencias de Nuevos Registros</h2>
    <div class="chart-container">
        <div class="chart-title">Evoluci√≥n de nuevos usuarios (√∫ltimos 7 d√≠as)</div>
        <img src="{{urlGraficoRegistros}}" alt="Tendencias de Nuevos Registros">
        <div class="chart-description">
            An√°lisis temporal del crecimiento de usuarios en los √∫ltimos 7 d√≠as.
            Permite identificar patrones de registro y tendencias de crecimiento.
        </div>
    </div>
</div>

<!-- SALTO DE P√ÅGINA PARA INFORMACI√ìN ADICIONAL -->
<div class="page-break"></div>

<!-- P√ÅGINA 5: INFORMACI√ìN ADICIONAL -->
<h2>‚ÑπÔ∏è Informaci√≥n del Sistema</h2>

<table class="data-table">
    <tr>
        <th>Par√°metro</th>
        <th>Valor</th>
        <th>Descripci√≥n</th>
    </tr>
    <tr>
        <td><strong>Fecha de Generaci√≥n</strong></td>
        <td>{{fechaGeneracion}}</td>
        <td>Momento exacto de creaci√≥n del reporte</td>
    </tr>
    <tr>
        <td><strong>Total M√©tricas</strong></td>
        <td>6 indicadores</td>
        <td>Principales KPI de la plataforma</td>
    </tr>
    <tr>
        <td><strong>Gr√°ficos Incluidos</strong></td>
        <td>3 visualizaciones</td>
        <td>An√°lisis visual de datos</td>
    </tr>
    <tr>
        <td><strong>Per√≠odo Analizado</strong></td>
        <td>Hist√≥rico completo</td>
        <td>Datos acumulados hasta la fecha</td>
    </tr>
    <tr>
        <td><strong>Total Usuarios</strong></td>
        <td>{{totalUsuarios}}</td>
        <td>Usuarios registrados en el sistema</td>
    </tr>
    <tr>
        <td><strong>Preguntas Activas</strong></td>
        <td>{{totalPreguntas}}</td>
        <td>Preguntas disponibles para juego</td>
    </tr>
    <tr>
        <td><strong>Partidas del D√≠a</strong></td>
        <td>{{partidasHoy}}</td>
        <td>Actividad de juego en la fecha actual</td>
    </tr>
</table>

<!-- Footer -->
<div class="footer">
    <p>
        Reporte generado autom√°ticamente por el Sistema Preguntados<br>
        ¬© 2024 Preguntados - Todos los derechos reservados<br>
        P√°gina <span class="page-number"></span>
    </p>
</div>

</body>
</html>